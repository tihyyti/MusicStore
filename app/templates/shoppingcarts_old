<!-- HTML Table for ShoppingCart Contents -->
<div id="cartContents" style="display: none;">
    <h3>Shopping Cart Contents</h3>
    <table id="cartContentsTable">
        <thead>
            <tr>
                <th>Product ID</th>
                <th>Product Name</th>
                <th>Details</th>
                <th>Price</th>
                <th>Quantity</th>
            </tr>
        </thead>
        <tbody>
            <!-- Rows will be populated dynamically -->
        </tbody>
    </table>
</div>

<script>
    // Function to fetch and display cart contents with CSRF protection
    function showCartContents(cartId) {
        const csrfToken = getCsrfToken(); // Function to get CSRF token

        fetch(`/cart-contents/${cartId}`, {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json',
                'CSRF-Token': csrfToken // Include CSRF token in headers
            }
        })
        .then(response => response.json())
        .then(data => {
            const tableBody = document.getElementById('cartContentsTable').getElementsByTagName('tbody')[0];
            tableBody.innerHTML = ''; // Clear previous contents
            data.forEach(item => {
                const row = tableBody.insertRow();
                row.innerHTML = `
                    <td>${item.product_id}</td>
                    <td>${item.productName}</td>
                    <td>${item.productDetails}</td>
                    <td>${item.productSalesPrice}</td>
                    <td>${item.quantity}</td>
                `;
            });
            document.getElementById('cartContents').style.display = 'block';
        });
    }

    // Example function to handle cart selection (replace with actual implementation)
    function handleCartSelection(cartId) {
        showCartContents(cartId);
    }

    // Function to get CSRF token (implementation depends on your backend)
    function getCsrfToken() {
        // Example implementation, replace with actual method to get CSRF token
        return document.querySelector('meta[name="csrf-token"]').getAttribute('content');
    }
</script>
